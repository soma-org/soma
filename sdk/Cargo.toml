[package]
name = "sdk"
edition = "2024"
version.workspace = true

[dependencies]
types = { path = "../types", default-features = false }
soma-keys.workspace = true
serde.workspace = true
serde_json.workspace = true
anyhow.workspace = true
serde_with = { version = "3.16", default-features = false, features = ["alloc"] }
thiserror.workspace = true
rpc = { path = "../rpc", default-features = false }
bcs.workspace = true
tokio.workspace = true
tracing.workspace = true
url.workspace = true
uuid.workspace = true
futures.workspace = true
fastcrypto.workspace = true
tonic = { version = "0.13", default-features = false, features = [
    "channel",
    "codegen",
    "prost",
    "zstd",
] }
bytes.workspace = true
rand.workspace = true
aes.workspace = true
ctr.workspace = true
hex.workspace = true
tiny-bip39.workspace = true

# Optional gRPC service deps
scoring = { path = "../scoring", default-features = false, optional = true }
admin = { path = "../admin", optional = true }

# Optional proxy/TLS deps
reqwest = { version = "0.12", default-features = false, features = ["http2", "json"], optional = true }

[features]
default = ["tls"]
proxy = ["dep:reqwest"]
tls = ["rpc/tls", "proxy", "reqwest/rustls-tls"]
grpc-services = ["dep:scoring", "dep:admin"]

[dev-dependencies]
faucet = { path = "../faucet", default-features = false }
tokio-stream.workspace = true

[lints]
workspace = true
