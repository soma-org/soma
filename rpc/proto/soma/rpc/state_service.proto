syntax = "proto3";

package soma.rpc;

import "google/protobuf/field_mask.proto";
import "google/protobuf/struct.proto";
import "soma/rpc/executed_transaction.proto";
import "soma/rpc/object.proto";
import "soma/rpc/transaction.proto";


service StateService {
  rpc ListOwnedObjects(ListOwnedObjectsRequest) returns (ListOwnedObjectsResponse);
  rpc GetBalance(GetBalanceRequest) returns (GetBalanceResponse);
}

// Request message for `LiveDataService.GetBalance`.
message GetBalanceRequest {
  // Required. The owner's Sui address.
  optional string owner = 1;
}

// Response message for `LiveDataService.GetBalance`.
// Return the total coin balance for coin, owned by the address owner.
message GetBalanceResponse {
  optional uint64 balance = 1;
}

message ListOwnedObjectsRequest {
  // Required. The address of the account that owns the objects.
  optional string owner = 1;

  // The maximum number of entries return. The service may return fewer than this value.
  // If unspecified, at most `50` entries will be returned.
  // The maximum value is `1000`; values above `1000` will be coerced to `1000`.
  optional uint32 page_size = 2;

  // A page token, received from a previous `ListOwnedObjects` call.
  // Provide this to retrieve the subsequent page.
  //
  // When paginating, all other parameters provided to `ListOwnedObjects` must
  // match the call that provided the page token.
  optional bytes page_token = 3;

  // Mask specifying which fields to read.
  // If no mask is specified, defaults to `object_id,version,object_type`.
  optional google.protobuf.FieldMask read_mask = 4;

  // Optional type filter to limit the types of objects listed.
  //
  // Providing an object type with no type params will return objects of that
  // type with any type parameter.
  optional string object_type = 5;
}

message ListOwnedObjectsResponse {
  // Page of dynamic fields owned by the specified parent.
  repeated Object objects = 1;

  // A token, which can be sent as `page_token` to retrieve the next page.
  // If this field is omitted, there are no subsequent pages.
  optional bytes next_page_token = 2;
}